{
  "annotations": {
    "list": [
      {
        "builtIn"   : 1,
        "datasource": "-- Grafana --",
        "enable"    : true,
        "hide"      : true,
        "iconColor" : "rgba(0, 211, 255, 1)",
        "limit"     : 100,
        "name"      : "Annotations & Alerts",
        "showIn"    : 0,
        "type"      : "dashboard"
      },
      {
        "datasource" : "Prometheus",
        "enable"     : true,
        "expr"       : "changes(kube_pod_container_status_restarts_total{pod=\"$pod\", namespace=~\"$namespace\"}[1m])",
        "hide"       : false,
        "iconColor"  : "rgba(255, 96, 96, 1)",
        "limit"      : 100,
        "name"       : "Container restarts",
        "showIn"     : 0,
        "step"       : "60s",
        "tagKeys"    : "container",
        "tags"       : [],
        "titleFormat": "Container restarted",
        "type"       : "tags"
      }
    ]
  },
  "editable"    : true,
  "graphTooltip": 1,
  "hideControls": false,
  "links"       : [],
  "refresh"     : false,
  "rows"        : [
    {
      "collapse": false,
      "editable": true,
      "height"  : "250px",
      "panels"  : [
        {
          "aliasColors": {},
          "bars"       : false,
          "dashLength" : 10,
          "dashes"     : false,
          "datasource" : "Prometheus",
          "editable"   : true,
          "error"      : false,
          "fill"       : 1,
          "grid"       : {
            "threshold1Color": "rgba(216, 200, 27, 0.27)",
            "threshold2Color": "rgba(234, 112, 112, 0.22)"
          },
          "id"    : 1,
          "isNew" : false,
          "legend": {
            "alignAsTable": true,
            "avg"         : true,
            "current"     : true,
            "hideEmpty"   : false,
            "hideZero"    : false,
            "max"         : false,
            "min"         : false,
            "rightSide"   : true,
            "show"        : true,
            "total"       : false,
            "values"      : true
          },
          "lines"          : true,
          "linewidth"      : 2,
          "links"          : [],
          "nullPointMode"  : "connected",
          "percentage"     : false,
          "pointradius"    : 5,
          "points"         : false,
          "renderer"       : "flot",
          "seriesOverrides": [],
          "spaceLength"    : 10,
          "span"           : 12,
          "stack"          : false,
          "steppedLine"    : false,
          "targets"        : [
            {
              "expr"          : "sum by (container_name)(rate(container_cpu_usage_seconds_total{image!=\"\",container_name!=\"POD\",pod_name=\"$pod\"}[1m]))",
              "intervalFactor": 2,
              "legendFormat"  : "{{ container_name }}",
              "refId"         : "A",
              "step"          : 30
            },
            {
              "expr"          : "kube_pod_container_resource_requests_cpu_cores{pod=\"$pod\", container=~\"$container\"}",
              "interval"      : "10s",
              "intervalFactor": 2,
              "legendFormat"  : "Requested: {{ container }}",
              "metric"        : "kube_pod_container_resource_requests_cpu_cores",
              "refId"         : "B",
              "step"          : 20
            },
            {
              "expr"          : "kube_pod_container_resource_limits_cpu_cores{pod=\"$pod\", container=~\"$container\"}",
              "interval"      : "10s",
              "intervalFactor": 2,
              "legendFormat"  : "Limit: {{ container }}",
              "metric"        : "kube_pod_container_resource_limits_memory_bytes",
              "refId"         : "C",
              "step"          : 20
            }
          ],
          "title"  : "CPU Usage",
          "tooltip": {
            "msResolution": true,
            "shared"      : true,
            "sort"        : 0,
            "value_type"  : "cumulative"
          },
          "type" : "graph",
          "xaxis": {
            "mode"  : "time",
            "show"  : true,
            "values": []
          },
          "yaxes": [
            {
              "format" : "short",
              "logBase": 1,
              "show"   : true
            },
            {
              "format" : "short",
              "logBase": 1,
              "show"   : true
            }
          ]
        }
      ],
      "showTitle": false,
      "title"    : "Row",
      "titleSize": "h6"
    },
    {
      "collapse": false,
      "editable": true,
      "height"  : "250px",
      "panels"  : [
        {
          "aliasColors": {},
          "bars"       : false,
          "dashLength" : 10,
          "dashes"     : false,
          "datasource" : "Prometheus",
          "editable"   : true,
          "error"      : false,
          "fill"       : 1,
          "grid"       : {
            "threshold1Color": "rgba(216, 200, 27, 0.27)",
            "threshold2Color": "rgba(234, 112, 112, 0.22)"
          },
          "id"    : 2,
          "isNew" : false,
          "legend": {
            "alignAsTable": true,
            "avg"         : true,
            "current"     : true,
            "hideEmpty"   : false,
            "hideZero"    : false,
            "max"         : false,
            "min"         : false,
            "rightSide"   : true,
            "show"        : true,
            "total"       : false,
            "values"      : true
          },
          "lines"          : true,
          "linewidth"      : 2,
          "links"          : [],
          "nullPointMode"  : "connected",
          "percentage"     : false,
          "pointradius"    : 5,
          "points"         : false,
          "renderer"       : "flot",
          "seriesOverrides": [],
          "spaceLength"    : 10,
          "span"           : 12,
          "stack"          : false,
          "steppedLine"    : false,
          "targets"        : [
            {
              "expr"          : "sum by(container_name) (container_memory_working_set_bytes{pod_name=\"$pod\", container_name=~\"$container\", container_name!=\"POD\"})",
              "interval"      : "10s",
              "intervalFactor": 1,
              "legendFormat"  : "Current (w/o cache): {{ container_name }}",
              "metric"        : "container_memory_working_set_bytes",
              "refId"         : "A",
              "step"          : 15
            },
            {
              "expr"          : "sum by(container_name) (container_memory_usage_bytes{pod_name=\"$pod\", container_name=~\"$container\", container_name!=\"POD\"})",
              "interval"      : "10s",
              "intervalFactor": 1,
              "legendFormat"  : "Current (w/ cache): {{ container_name }}",
              "metric"        : "container_memory_usage_bytes",
              "refId"         : "B",
              "step"          : 15
            },
            {
              "expr"          : "kube_pod_container_resource_requests_memory_bytes{pod=\"$pod\", container=~\"$container\"}",
              "interval"      : "10s",
              "intervalFactor": 2,
              "legendFormat"  : "Requested: {{ container }}",
              "metric"        : "kube_pod_container_resource_requests_memory_bytes",
              "refId"         : "C",
              "step"          : 20
            },
            {
              "expr"          : "kube_pod_container_resource_limits_memory_bytes{pod=\"$pod\", container=~\"$container\"}",
              "interval"      : "10s",
              "intervalFactor": 2,
              "legendFormat"  : "Limit: {{ container }}",
              "metric"        : "kube_pod_container_resource_limits_memory_bytes",
              "refId"         : "D",
              "step"          : 20
            }
          ],
          "title"  : "Memory Usage",
          "tooltip": {
            "msResolution": true,
            "shared"      : true,
            "sort"        : 0,
            "value_type"  : "cumulative"
          },
          "type" : "graph",
          "xaxis": {
            "mode"  : "time",
            "show"  : true,
            "values": []
          },
          "yaxes": [
            {
              "format" : "bytes",
              "logBase": 1,
              "show"   : true
            },
            {
              "format" : "short",
              "logBase": 1,
              "show"   : true
            }
          ]
        }
      ],
      "showTitle": false,
      "title"    : "Row",
      "titleSize": "h6"
    },
    {
      "collapse": false,
      "editable": true,
      "height"  : "250px",
      "panels"  : [
        {
          "aliasColors": {},
          "bars"       : false,
          "dashLength" : 10,
          "dashes"     : false,
          "datasource" : "Prometheus",
          "editable"   : true,
          "error"      : false,
          "fill"       : 1,
          "grid"       : {
            "threshold1Color": "rgba(216, 200, 27, 0.27)",
            "threshold2Color": "rgba(234, 112, 112, 0.22)"
          },
          "id"    : 3,
          "isNew" : false,
          "legend": {
            "alignAsTable": true,
            "avg"         : true,
            "current"     : true,
            "hideEmpty"   : false,
            "hideZero"    : false,
            "max"         : false,
            "min"         : false,
            "rightSide"   : true,
            "show"        : true,
            "total"       : false,
            "values"      : true
          },
          "lines"          : true,
          "linewidth"      : 2,
          "links"          : [],
          "nullPointMode"  : "connected",
          "percentage"     : false,
          "pointradius"    : 5,
          "points"         : false,
          "renderer"       : "flot",
          "seriesOverrides": [],
          "spaceLength"    : 10,
          "span"           : 12,
          "stack"          : false,
          "steppedLine"    : false,
          "targets"        : [
            {
              "expr"          : "sort_desc(sum by (pod_name) (rate(container_network_receive_bytes_total{pod_name=\"$pod\"}[1m])))",
              "intervalFactor": 2,
              "legendFormat"  : "{{ pod_name }}",
              "refId"         : "A",
              "step"          : 30
            }
          ],
          "title"  : "Network I/O",
          "tooltip": {
            "msResolution": true,
            "shared"      : true,
            "sort"        : 0,
            "value_type"  : "cumulative"
          },
          "type" : "graph",
          "xaxis": {
            "mode"  : "time",
            "show"  : true,
            "values": []
          },
          "yaxes": [
            {
              "format" : "bytes",
              "logBase": 1,
              "show"   : true
            },
            {
              "format" : "short",
              "logBase": 1,
              "show"   : true
            }
          ]
        }
      ],
      "showTitle": false,
      "title"    : "New Row",
      "titleSize": "h6"
    }
  ],
  "schemaVersion"  : 14,
  "sharedCrosshair": false,
  "style"          : "dark",
  "tags"           : [
    "kubernetes"
  ],
  "templating": {
    "list": [
      {
        "allValue"      : ".*",
        "current"       : {},
        "datasource"    : "Prometheus",
        "hide"          : 0,
        "includeAll"    : true,
        "label"         : "Namespace",
        "multi"         : false,
        "name"          : "namespace",
        "options"       : [],
        "query"         : "label_values(kube_pod_info, namespace)",
        "refresh"       : 1,
        "regex"         : "",
        "sort"          : 0,
        "tagValuesQuery": "",
        "tags"          : [],
        "tagsQuery"     : "",
        "type"          : "query",
        "useTags"       : false
      },
      {
        "allValue"      : null,
        "current"       : {},
        "datasource"    : "Prometheus",
        "hide"          : 0,
        "includeAll"    : false,
        "label"         : "Pod",
        "multi"         : false,
        "name"          : "pod",
        "options"       : [],
        "query"         : "label_values(kube_pod_info{namespace=~\"$namespace\"}, pod)",
        "refresh"       : 1,
        "regex"         : "",
        "sort"          : 0,
        "tagValuesQuery": "",
        "tags"          : [],
        "tagsQuery"     : "",
        "type"          : "query",
        "useTags"       : false
      },
      {
        "allValue"      : ".*",
        "current"       : {},
        "datasource"    : "Prometheus",
        "hide"          : 0,
        "includeAll"    : true,
        "label"         : "Container",
        "multi"         : false,
        "name"          : "container",
        "options"       : [],
        "query"         : "label_values(kube_pod_container_info{namespace=~\"$namespace\", pod=\"$pod\"}, container)",
        "refresh"       : 1,
        "regex"         : "",
        "sort"          : 0,
        "tagValuesQuery": "",
        "tags"          : [],
        "tagsQuery"     : "",
        "type"          : "query",
        "useTags"       : false
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to"  : "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options": [
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone": "browser",
  "title"   : "Kubernetes / Compute Resources / Pod v2",
  "version" : 3
}
